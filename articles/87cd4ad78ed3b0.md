---
title: "rubyのしくみと計算理論入門 ①"
emoji: "👏"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["ruby"]
published: false
---

## この記事の概要

### この記事の主な目的

web系エンジニアにとって馴染み深い言語であるRubyの中の仕組みについて書かれた素晴らしい著書、「[Rubyのしくみ - Ruby Under a Microscope](https://www.amazon.co.jp/Ruby%E3%81%AE%E3%81%97%E3%81%8F%E3%81%BF-Ruby-Under-Microscope-Shaughnessy/dp/4274050653/ref=sr_1_1?adgrpid=99384104152&hvadid=651846795587&hvdev=c&hvlocphy=1009079&hvnetw=g&hvqmt=e&hvrand=14616656525455784485&hvtargid=kwd-899754850500&hydadcr=1308_13596571&jp-ad-ap=0&keywords=ruby%E3%81%AE%E3%81%97%E3%81%8F%E3%81%BF&qid=1695469507&sr=8-1)」とコンピュータサイエンティストにとって馴染み深い計算理論について書かれた素晴らしい著書、「[計算理論の基礎［原著第3版］ 1.オートマトンと言語](https://www.amazon.co.jp/%E8%A8%88%E7%AE%97%E7%90%86%E8%AB%96%E3%81%AE%E5%9F%BA%E7%A4%8E%EF%BC%BB%E5%8E%9F%E8%91%97%E7%AC%AC3%E7%89%88%EF%BC%BD-1-%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3%E3%81%A8%E8%A8%80%E8%AA%9E-Michael-Sipser-ebook/dp/B0CCRPT38D/ref=sr_1_1?adgrpid=53721194776&hvadid=667938814991&hvdev=c&hvlocphy=1009079&hvnetw=g&hvqmt=e&hvrand=1906747944410746746&hvtargid=kwd-334610226953&hydadcr=13895_13546187&jp-ad-ap=0&keywords=%E8%A8%88%E7%AE%97%E7%90%86%E8%AB%96%E3%81%AE%E5%9F%BA%E7%A4%8E&qid=1695469686&sr=8-1)」の知識的綱渡しを試みる。初心者が、Rubyについても、コンピュータサイエンスについても、今後より楽しめることができるための1歩目として記事を書いていく（反対に言えばコンピュータサイエンスやrubyに詳しい人にとっては当たり前すぎる内容になる）。

### この記事でやること

- Rubyのしくみの第1章「字句解析と構文解析」について掘り下げ、それを計算理論のオートマトン理論へと発展させること。
- Rubyの内部で働いている字句解析と構文解析を数学的・視覚的に表現すること。
- rubyという言語をより多角的に見て楽しむこと
- コンピュータサイエンスの一分野である計算理論を楽しむこと

### この記事でやらないこと

- Rubyのしくみの厳密な解説。この記事はあくまで橋渡し的なことをしたいので詳しくは解説しない。そちらに関しては本を参照してください。
- 計算理論の厳密な証明。こちらも同じで、証明までいれるときりがない気がするので、詳しくは本を参照していただきたい。あくまで橋渡しに徹する。

### その他注意点

- 数学的言語を使って何かを表すということは一定程度の象捨が発生する。故に計算理論でいえることがRuby以外の言語にも当てはまることとなる。そのことは認めつつも、きっかけとなったRubyのしくみの本を基本として議論する
- この記事のを書いているのはエンジニア歴もruby歴も2年程度であり、大学も文系卒で留年しかけるレベルの人間です。運悪くこの記事を見てしまった方は、温かい舌打ちと嘲笑で見守っていただけると幸いです。

## 目次

1. 導出
2. Rubyのしくみの大枠の流れ
3. Rubyのしくみと字句解析
4. 正規表現と字句解析
5. 正規表現の数学的性質
6. 有限オートマトンについて
7. 正規表現と有限オートマトンの能力等価性
8. 有限オートマトンを導出する意義
9. まとめと次回予告
10. 余談 - 記事を書いた経緯について

## 1. 導出

この記事の概要でも説明したように、Rubyのしくみの第1章の字句解析と構文解析から、計算理論のオートマトン理論へと発展することがこの記事の目的である。特に本記事は字句解析と有限オートマトンについて焦点をあてる。

### 計算理論とは

そもそも計算理論とはなにか？
多分いろんな定義があるが、「[計算理論の基礎［原著第3版］ 1.オートマトンと言語](https://www.amazon.co.jp/%E8%A8%88%E7%AE%97%E7%90%86%E8%AB%96%E3%81%AE%E5%9F%BA%E7%A4%8E%EF%BC%BB%E5%8E%9F%E8%91%97%E7%AC%AC3%E7%89%88%EF%BC%BD-1-%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3%E3%81%A8%E8%A8%80%E8%AA%9E-Michael-Sipser-ebook/dp/B0CCRPT38D/ref=sr_1_1?adgrpid=53721194776&hvadid=667938814991&hvdev=c&hvlocphy=1009079&hvnetw=g&hvqmt=e&hvrand=1906747944410746746&hvtargid=kwd-334610226953&hydadcr=13895_13546187&jp-ad-ap=0&keywords=%E8%A8%88%E7%AE%97%E7%90%86%E8%AB%96%E3%81%AE%E5%9F%BA%E7%A4%8E&qid=1695469686&sr=8-1)」には『`計算機の本質的な能力とその限界は何か？`』についての理論と定義されている。そしてその定義にのっとると、①計算の複雑さの理論, ②計算可能性の理論、③オートマトン理論の３つに大別される。①②はアルゴリズムとデータ構造系の話でよくでてくるので聞いたことある人も多かろう。今回は③のオートマトン理論に主に焦点を当てる。

### オートマトン理論とは

計算理論では抽象的な装置や機械の概念のことをオートマトンという。もっと具体的に言うと機械や装置を数学的なモデルで考えることといえる。ただこれは「オートマトンとはなにか」を深く考えるより実際に有限オートマトンとかについて学ぶとイメージできるようになるだろう。

いわば今回の記事は字句解析を数学的なモデルに置き換えることで、字句解析の本質的な理解と限界について考えることができるようになることが目的である。

さっそく本題に入っていこう！

## 2. Rubyのしくみの大枠の流れ
